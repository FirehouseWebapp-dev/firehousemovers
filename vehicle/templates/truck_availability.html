{% extends "availability_logistic_base.html" %}
{% load static %}
{% block content %}

<div class="container mx-auto mt-8 p-4">
    <h2 class="text-3xl font-bold mb-6 text-center text-red-600">Truck & Trailer Availability</h2>
    <form method="post" class="border border-gray-200 rounded-lg shadow-lg p-6 space-y-6 bg-white">
        {% csrf_token %}
        
        <!-- Date Picker -->
        <div>
            <label for="date" class="block font-medium text-gray-700">Date</label>
            <input type="date" id="date" name="date" 
                class="border border-gray-300 rounded-md px-2 py-2 focus:outline-none focus:ring-2 focus:ring-red-500 w-full">
        </div>

        <div class="text-right">
            <button type="submit" class="bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-full shadow">
                Submit Availability
            </button>
        </div>
        
        <div class="grid grid-cols-2 gap-8">
            <!-- Truck Availability -->
            <div class="border border-white p-4 rounded-lg shadow-lg">
                <h3 class="text-xl font-semibold mb-4 text-red-500">Truck Availability</h3>
                <div class="grid grid-cols-1 gap-4">
                    {% for truck in trucks %}
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="truck_{{ forloop.counter }}" class="block text-gray-700">{{ truck.vehicle.name }}</label>
                            <select id="truck_{{ forloop.counter }}" name="truck_{{ forloop.counter }}" 
                                class="border border-gray-300 rounded-md px-2 py-2 focus:outline-none focus:ring-2 focus:ring-red-500 w-full">
                                <option value="In Service" {% if truck.status == 'In Service' %}selected{% endif %}>In Service</option>
                                <option value="Out of Service" {% if truck.status == 'Out of Service' %}selected{% endif %}>Out of Service</option>
                            </select>
                        </div>
                        <div>
                            <label for="truck_{{ forloop.counter }}_date" class="block text-gray-700">Estimated Return</label>
                            <input type="date" id="truck_{{ forloop.counter }}_date" name="truck_{{ forloop.counter }}_date" 
                                value="{{ truck.estimated_back_in_service_date|date:'Y-m-d' }}" 
                                class="border border-gray-300 rounded-md px-2 py-2 focus:outline-none focus:ring-2 focus:ring-red-500 w-full">
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Trailer Availability -->
            <div class="border border-white p-4 rounded-lg shadow-lg">
                <h3 class="text-xl font-semibold mb-4 text-red-500">Trailer Availability</h3>
                <div class="grid grid-cols-1 gap-4">
                    {% for trailer in trailers %}
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="trailer_{{ forloop.counter }}" class="block text-gray-700">{{ trailer.vehicle.name }}</label>
                            <select id="trailer_{{ forloop.counter }}" name="trailer_{{ forloop.counter }}" 
                                class="border border-gray-300 rounded-md px-2 py-2 focus:outline-none focus:ring-2 focus:ring-red-500 w-full">
                                <option value="In Service" {% if trailer.status == 'In Service' %}selected{% endif %}>In Service</option>
                                <option value="Out of Service" {% if trailer.status == 'Out of Service' %}selected{% endif %}>Out of Service</option>
                            </select>
                        </div>
                        <div>
                            <label for="trailer_{{ forloop.counter }}_date" class="block text-gray-700">Estimated Return</label>
                            <input type="date" id="trailer_{{ forloop.counter }}_date" name="trailer_{{ forloop.counter }}_date" 
                                value="{{ trailer.estimated_back_in_service_date|date:'Y-m-d' }}" 
                                class="border border-gray-300 rounded-md px-2 py-2 focus:outline-none focus:ring-2 focus:ring-red-500 w-full">
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </form>
</div>

{% endblock %}
