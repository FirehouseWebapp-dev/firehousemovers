{% extends "evaluation/base.html" %}
{% load form_tags %}
{% block title %}Pending Reviews{% endblock %}

{% block content %}


<h1 class="text-3xl font-bold text-red-500 mb-6">Pending Reviews</h1>

{# Per-cycle progress #}
<div class="space-y-4 mb-8">
  {% for c in cycles %}
    <div class="bg-[#111] border border-gray-700 rounded p-4">
      <div class="flex items-center justify-between mb-2">
        <div class="text-white font-semibold">
          {{ c.get_cycle_type_display }} • {{ c.period_start }} → {{ c.period_end }}
        </div>
        <div class="text-gray-400 text-sm">
          {{ c.done }}/{{ c.total }} completed
        </div>
      </div>

      <div class="progress-bar">
        <div class="progress-fill" style="width: {{ c.done|pct:c.total }}%"></div>
      </div>
      <div class="text-gray-400 text-xs mt-1">{{ c.done|pct:c.total }}%</div>
    </div>
  {% empty %}
    <div class="text-gray-400">No cycles for you yet.</div>
  {% endfor %}
</div>

{# Pending items list #}
<h2 class="text-xl font-semibold text-white mb-3">Items to complete</h2>
<div class="space-y-2">
  {% for it in pending_items %}
    <div class="bg-[#111] border border-gray-700 rounded p-4 flex items-center justify-between">
      <div>
        <div class="text-white font-medium">
          {{ it.subject_manager.user.get_full_name|default:it.subject_manager.user.username }}
        </div>
        <div class="text-gray-400 text-sm">
          {{ it.cycle.get_cycle_type_display }} • {{ it.cycle.period_start }} → {{ it.cycle.period_end }}
        </div>
      </div>
      <a href="{% url 'evaluation:evaluate_manager' it.id %}"
         class="px-3 py-2 rounded bg-red-600 hover:bg-red-500 text-white text-sm">
        Evaluate
      </a>
    </div>
  {% empty %}
    <div class="text-gray-400">No pending reviews—nice!</div>
  {% endfor %}
</div>
{% endblock %}
