{% extends "evaluation/base.html" %}
{% block title %}Pending Evaluations{% endblock %}

{% block content %}

{# Flash messages block #}
{% if messages %}
  <div class="mb-4">
    {% for message in messages %}
      <div class="bg-gray-800 border-l-4 border-gray-700 text-red-500 p-4" role="alert">
        {{ message }}
      </div>
    {% endfor %}
  </div>
{% endif %}

  <h1 class="text-2xl font-bold text-red-500 mb-4">Pending Evaluations</h1>

  <div class="bg-gray-800 rounded p-4 mb-6">
    <p class="text-gray-300">
      Youâ€™ve completed
      <strong class="text-white">{{ completed }}</strong>
      out of
      <strong class="text-white">{{ total }}</strong>
      evaluations.
    </p>
    <div class="w-full h-4 bg-gray-600 rounded mt-2">
      <div
        class="h-4 bg-red-500 rounded"
        style="width: {{ percent_complete }}%"
      ></div>
    </div>
  </div>

  {% if pending_evaluations %}
    <ul class="space-y-4">
      {% for eval in pending_evaluations %}
        <li class="flex justify-between items-center border-b border-gray-700 py-3">
          <div>
            <div class="text-white font-semibold">
              {{ eval.employee.user.get_full_name }}
            </div>
            <div class="text-sm text-gray-400">
              Week of {{ eval.week_start }} to {{ eval.week_end }}
            </div>
          </div>
          <div class="flex items-center gap-2">
            <span class="bg-yellow-800 text-yellow-300 text-xs font-bold px-3 py-1 rounded">
              Pending
            </span>
            <a
              href="{% url 'evaluation:evaluate' eval.id %}"
              class="bg-red-600 text-white px-4 py-1 rounded hover:bg-red-700"
            >
              Evaluate
            </a>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-white">No pending evaluations! ðŸŽ‰</p>
  {% endif %}
{% endblock %}
