{% extends "evaluation/base.html" %}
{% block title %}Evaluation Dashboard{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold mb-6 text-red-500">Evaluation Dashboard</h1>

<form method="get" class="mb-6 flex items-center gap-4">
  <input type="text" name="q" placeholder="Search employee..." class="px-3 py-2 rounded bg-[#1a1a1a] text-white border border-gray-700 w-full md:w-1/3" />
  <button type="submit" class="bg-red-600 px-4 py-2 rounded hover:bg-red-700 text-white">
    <i class="fas fa-search mr-1"></i> Search
  </button>
</form>

<ul class="space-y-4">
  {% for evaluation in evaluations %}
    <li class="flex justify-between items-center border-b border-gray-700 py-3">
      <div>
        <div class="text-white text-lg font-semibold">{{ evaluation.employee.user.get_full_name }}</div>
        <div class="text-sm text-gray-400">Week of {{ evaluation.week_start }}</div>
      </div>

      <div class="flex items-center gap-3">
        {% if evaluation.status == "completed" %}
          <span class="status-badge status-completed">Submitted</span>
        {% else %}
          <span class="status-badge status-pending">Pending</span>
        {% endif %}

        <a href="{% url 'evaluation:evaluate' evaluation.id %}" class="text-sm font-bold px-4 py-1 rounded bg-red-600 hover:bg-red-700 text-white">
          {% if evaluation.status == "completed" and today <= evaluation.week_end %}
            Edit
          {% elif evaluation.status == "completed" %}
            View
          {% else %}
            Evaluate
          {% endif %}
        </a>
      </div>
    </li>
  {% empty %}
    <li class="text-gray-400">No evaluations to display.</li>
  {% endfor %}
</ul>
{% endblock %}
