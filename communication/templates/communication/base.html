{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="csrf-token" content="{{ csrf_token }}">
  <title>{% block title %}Communication Logs - Firehouse Movers{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="{% static 'communication/css/communication.css' %}" />
  {% block extra_css %}{% endblock %}
</head>
<body class="bg-black text-white min-h-screen">
  {% include "inventory_app/navbar.html" %}

  <div class="flex min-h-screen">
    <!-- Sidebar -->
    <aside class="w-64 bg-[#1a1a1a] text-white px-6 py-8 hidden md:block">
      <nav class="space-y-4">
        {% with user_profile=request.user.userprofile %}
          
          <a href="{% url 'communication:dashboard' %}" class="block py-2 px-3 rounded border-l-4 {% if request.path == '/communication/' %}bg-red-500 border-red-500 text-white font-semibold{% else %}border-transparent hover:bg-gray-800{% endif %}">
            <i class="fas fa-chart-line mr-2"></i> Log Dashboard
          </a>

          {% if user_profile.is_senior_management and not user_profile.is_manager %}
            <!-- Senior Management (not also a manager) -->
            <a href="{% url 'communication:log_list' %}?view=created" class="block py-2 px-3 rounded border-l-4 {% if request.resolver_match.url_name == 'log_list' and request.GET.view != 'received' %}bg-red-500 border-red-500 text-white font-semibold{% else %}border-transparent hover:bg-gray-800{% endif %}">
              <i class="fas fa-user-tie mr-2"></i> Manager Logs
            </a>

            <a href="{% url 'communication:create_log' %}" class="block py-2 px-3 rounded border-l-4 {% if 'create' in request.path %}bg-red-500 border-red-500 text-white font-semibold{% else %}border-transparent hover:bg-gray-800{% endif %}">
              <i class="fas fa-plus-circle mr-2"></i> Create Log
            </a>
          {% elif user_profile.is_manager %}
            <!-- Managers -->
            <a href="{% url 'communication:log_list' %}?view=created" class="block py-2 px-3 rounded border-l-4 {% if request.resolver_match.url_name == 'log_list' and request.GET.view != 'received' %}bg-red-500 border-red-500 text-white font-semibold{% else %}border-transparent hover:bg-gray-800{% endif %}">
              <i class="fas fa-list mr-2"></i> Employee Logs
            </a>

            <a href="{% url 'communication:log_list' %}?view=received" class="block py-2 px-3 rounded border-l-4 {% if request.resolver_match.url_name == 'log_list' and request.GET.view == 'received' %}bg-red-500 border-red-500 text-white font-semibold{% else %}border-transparent hover:bg-gray-800{% endif %}">
              <i class="fas fa-inbox mr-2"></i> My Logs
            </a>

            <a href="{% url 'communication:create_log' %}" class="block py-2 px-3 rounded border-l-4 {% if 'create' in request.path %}bg-red-500 border-red-500 text-white font-semibold{% else %}border-transparent hover:bg-gray-800{% endif %}">
              <i class="fas fa-plus-circle mr-2"></i> Create Log
            </a>
          {% else %}
            <!-- Employees -->
            <a href="{% url 'communication:log_list' %}" class="block py-2 px-3 rounded border-l-4 {% if 'logs' in request.path %}bg-red-500 border-red-500 text-white font-semibold{% else %}border-transparent hover:bg-gray-800{% endif %}">
              <i class="fas fa-inbox mr-2"></i> My Logs
            </a>
          {% endif %}

        {% endwith %}
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 px-6 py-10 bg-black">
      {% include "messages.html" %}
      {% block content %}{% endblock %}
    </main>
  </div>

  {% block extra_js %}{% endblock %}
</body>
</html>

