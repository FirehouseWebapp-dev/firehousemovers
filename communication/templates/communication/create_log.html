{% extends "authentication/base_profile.html" %}
{% load static %}

{% block title %}Create Communication Log{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'communication/css/communication.css' %}" />
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-white mb-2">
      <i class="fas fa-plus-circle mr-3"></i>Create Communication Log
    </h1>
    <p class="text-gray-400">Document communication with your team members</p>
  </div>

  <div class="bg-[#1a1a1a] rounded-lg p-8 border border-gray-800">
    <form method="post" class="space-y-6">
      {% csrf_token %}

      <!-- Employee Selection -->
      <div>
        <label for="{{ form.employee.id_for_label }}" class="block text-sm font-semibold text-white mb-2">
          {{ form.employee.label }}
        </label>
        {{ form.employee }}
        {% if form.employee.errors %}
          <p class="mt-1 text-sm text-red-500">{{ form.employee.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Log Type -->
      <div>
        <label for="{{ form.log_type.id_for_label }}" class="block text-sm font-semibold text-white mb-2">
          {{ form.log_type.label }}
        </label>
        {{ form.log_type }}
        {% if form.log_type.errors %}
          <p class="mt-1 text-sm text-red-500">{{ form.log_type.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Subject -->
      <div>
        <label for="{{ form.subject.id_for_label }}" class="block text-sm font-semibold text-white mb-2">
          {{ form.subject.label }}
        </label>
        {{ form.subject }}
        {% if form.subject.errors %}
          <p class="mt-1 text-sm text-red-500">{{ form.subject.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Content -->
      <div>
        <label for="{{ form.content.id_for_label }}" class="block text-sm font-semibold text-white mb-2">
          {{ form.content.label }}
        </label>
        {{ form.content }}
        {% if form.content.errors %}
          <p class="mt-1 text-sm text-red-500">{{ form.content.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Event Date -->
      <div>
        <label for="{{ form.event_date.id_for_label }}" class="block text-sm font-semibold text-white mb-2">
          {{ form.event_date.label }}
        </label>
        {{ form.event_date }}
        <p class="mt-2 text-sm text-gray-400">
          <i class="fas fa-info-circle mr-1"></i>
          Date of record
        </p>
        {% if form.event_date.errors %}
          <p class="mt-1 text-sm text-red-500">{{ form.event_date.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Acknowledgment Settings -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="flex items-center gap-2 text-white mb-2">
            {{ form.requires_acknowledgment }}
            <span class="text-sm font-semibold">{{ form.requires_acknowledgment.label }}</span>
          </label>
          <p class="text-sm text-gray-400">
            <i class="fas fa-info-circle mr-1"></i>
            If checked, employee must acknowledge this log
          </p>
          {% if form.requires_acknowledgment.errors %}
            <p class="mt-1 text-sm text-red-500">{{ form.requires_acknowledgment.errors.0 }}</p>
          {% endif %}
        </div>

        <div id="deadline-container">
          <label for="{{ form.acknowledgment_deadline.id_for_label }}" class="block text-sm font-semibold text-white mb-2">
            {{ form.acknowledgment_deadline.label }}
          </label>
          {{ form.acknowledgment_deadline }}
          <p class="mt-2 text-sm text-gray-400">
            <i class="fas fa-clock mr-1"></i>
            Employee must acknowledge by this date
          </p>
          {% if form.acknowledgment_deadline.errors %}
            <p class="mt-1 text-sm text-red-500">{{ form.acknowledgment_deadline.errors.0 }}</p>
          {% endif %}
        </div>
      </div>

      <!-- Visibility -->
      <div>
        <label for="{{ form.visibility.id_for_label }}" class="block text-sm font-semibold text-white mb-2">
          {{ form.visibility.label }}
        </label>
        {{ form.visibility }}
        <p class="mt-2 text-sm text-gray-400">
          <i class="fas fa-info-circle mr-1"></i>
          Shared logs are visible to the employee and will send an email notification. Private logs are only visible to you.
        </p>
        {% if form.visibility.errors %}
          <p class="mt-1 text-sm text-red-500">{{ form.visibility.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Submit Buttons -->
      <div class="flex items-center gap-4 pt-4 border-t border-gray-700">
        <button type="submit" class="bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-6 rounded-lg transition">
          <i class="fas fa-save mr-2"></i>Create Log
        </button>
        <a href="{% url 'communication:log_list' %}" class="bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-6 rounded-lg transition">
          <i class="fas fa-times mr-2"></i>Cancel
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'communication/js/create_log.js' %}"></script>
{% endblock %}

